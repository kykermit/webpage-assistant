!function(){"use strict";const t=new Map;var e={set(e,s,i){if(""===e)return;const n=t.get(e);n?n.push({component:s,element:i}):t.set(e,[{component:s,element:i}])},get(e,s){const i=t.get(e)?.filter((t=>t.element===s));return i?i[0].component:null},getComponentList(e){const s=t.get(e)?.map((t=>t.component));return s},clear(){t.clear()}};const s=new Map;var i={set(t){for(const e of t.commands)s.set(e,t)},get:t=>s.get(t),getCommands:()=>Array.from(s.keys()),clear(){s.clear()}},n=class{get static(){return this.constructor}setStore(t){e.set(this.static.componentName,this,t)}};const o=t=>{t.offsetHeight},r=(t,e,s)=>{t&&("string"==typeof e?s&&t.style.setProperty(e,s):Object.entries(e).forEach((([e,s])=>{t.style.setProperty(e,s)})))},a=(t,e)=>{t&&("string"==typeof e?t.style.removeProperty(e):e.forEach((e=>{t.style.removeProperty(e)})))},c={alertItemSelector:".alert-toast",wrapClassName:"alert-toast-wrap",logoClassName:"alert-toast_logo",contentClassName:"alert-toast_content",titleClassName:"alert-toast_title",textClassName:"alert-toast_text"};class l extends n{constructor(t,e){super(),this._template=t,this._wrap=document.createElement("div"),this._config=this._getConfig(e),this._alertSet=new Set,"content"in t&&(this._setDefault(),this._bindEvent())}static create(t,e={}){document.querySelectorAll(t).forEach((t=>{new l(t,e).setStore(t)}))}_getConfig(t){return{...c,...t}}_setDefault(){this._wrap?.classList.add(this._config.wrapClassName)}_transitionEndHandler(t){"opacity"===t.propertyName&&t.target.remove()}_bindEvent(){this._wrap.addEventListener("transitionend",this._transitionEndHandler)}_applyVisibleContent(){0===this._alertSet.size?this._wrap.remove():document.body.appendChild(this._wrap)}_buildAlertElement(t,e,s){if(!("content"in this._template))return null;const i=this._template.content.cloneNode(!0),n=i.querySelector(this._config.alertItemSelector);if(!n)return null;if(n.setAttribute("role","alert"),this._wrap.appendChild(i),this._alertSet.add(n),s){const t=document.createElement("img");t.src=s,t.classList.add(this._config.logoClassName),n.appendChild(t)}const o=document.createElement("div");if(o.classList.add(this._config.contentClassName),n.appendChild(o),e){const t=document.createElement("span");t.innerText=e,t.classList.add(this._config.titleClassName),o.appendChild(t)}const r=document.createElement("span");return r.innerText=t,r.classList.add(this._config.textClassName),o.appendChild(r),n}alert(t,e,s){const i=this._buildAlertElement(`"${t}"`,e,s);i&&(this._applyVisibleContent(),setTimeout((()=>{i?.classList.add("is-alert-toast-active")}),100),setTimeout((()=>{i?.classList.add("is-alert-toast-hide"),r(i,{"margin-top":`-${i?.clientHeight}px`,"margin-bottom":"0"}),this._alertSet.delete(i),this._applyVisibleContent()}),4e3))}}l.componentName="alertToast";var h=l;const d=document.getElementById("assistant-alert");var m={connect(t){const e=new WebSocket(t);e.addEventListener("open",this.openHandler),e.addEventListener("message",this.messageHandler),e.addEventListener("error",this.errorHandler),e.addEventListener("close",this.closeHandler.bind(this,t))},openHandler(){console.log("connected")},messageHandler(t){const s=JSON.parse(t.data),{text:n,id:o,imageUrl:r}=s,a=i.get(n);let c="",l="";if(a){const t=e.getComponentList(a.componentName);t?.length?t.forEach((t=>{a.action(t)})):a.action(),c=a.getActionMessage(),l=a.getReplyMessage()}d&&c&&e.get(h.componentName,d)?.alert(c,"Assistant action",r),l||(l="アクションの実行に失敗しました。"),this.send(JSON.stringify({replyMessage:l,id:o}))},errorHandler(t){console.error("WebSocket error observed:",t)},closeHandler(t){console.log("disconnected"),this.connect(t)}};const _=window.matchMedia("(min-width: 769px)"),p="is-slide-nav-show",g="is-slide-nav-transition",u={slideDirectionNarrow:"vertical",slideDirectionWide:"horizontal",textSelector:".js-slide-nav_text",stickySelector:".js-slide-nav_sticky"};class f extends n{constructor(t,e){super(),this._element=t,this._config=this._getConfig(e),this._content=this._getConetntElement(),this._controlText=t.querySelector(this._config.textSelector),this._stickyContent=this._content?.querySelector(this._config.stickySelector),this._isTransition=!1,this._content&&(this._setDefault(),this._bindEvent())}static create(t,e={}){document.querySelectorAll(t).forEach((t=>{new f(t,e).setStore(t)}))}get _slideDirection(){return _.matches?this._config.slideDirectionWide:this._config.slideDirectionNarrow}_getConfig(t){return{...u,...t}}_getConetntElement(){const t=this._element.getAttribute("aria-controls");return t?document.getElementById(t):null}_setDefault(){this._element.setAttribute("aria-expanded","false")}_applyEndState(){var t;this.isOpen||this._content?.classList.remove(p),"vertical"===this._slideDirection?(t=this._content)&&(a(t,"height"),a(t,"padding-top"),a(t,"padding-bottom")):"horizontal"===this._slideDirection&&(t=>{t&&(a(t,"width"),a(t,"padding-left"),a(t,"padding-right"))})(this._content),this._isTransition=!1,this._content?.classList.remove(g)}_clickHandler(t){t.preventDefault(),this.toggle()}_transitionEndHandler(t){t.target!==this._content||"height"!==t.propertyName&&"width"!==t.propertyName||this._applyEndState()}_bindEvent(){this._element.addEventListener("click",this._clickHandler.bind(this)),this._content?.addEventListener("transitionend",this._transitionEndHandler.bind(this))}get isOpen(){return((t,e)=>{const s=this._element.getAttribute("aria-expanded");return!!s&&"true"===s.toLowerCase()})()}toggle(){this[this.isOpen?"hide":"show"]()}show(){var t;null===this._content||this._isTransition||(this.removeStickyPosition(),this._isTransition=!0,this._content.classList.add(g),"vertical"===this._slideDirection?(t=this._content,p,r(t,"height","0"),r(t,"padding-top","0"),r(t,"padding-bottom","0"),t.classList.add("is-slide-nav-show"),o(t),r(t,"height",`${t.scrollHeight}px`),a(t,"padding-top"),a(t,"padding-bottom")):"horizontal"===this._slideDirection&&((t,e)=>{r(t,"width","0"),r(t,"padding-left","0"),r(t,"padding-right","0"),t.classList.add("is-slide-nav-show"),o(t),r(t,"width",`${t.scrollWidth}px`),a(t,"padding-left"),a(t,"padding-right")})(this._content),this._element.setAttribute("aria-expanded","true"),this._controlText&&(this._controlText.innerText="ナビゲーションを閉じる"),this._element.focus())}hide(){var t;null===this._content||this._isTransition||(this.setStickyPosition(),this._isTransition=!0,this._content.classList.add(g),"vertical"===this._slideDirection?(t=this._content,r(t,"height",`${t.scrollHeight}px`),o(t),r(t,"height","0"),r(t,"padding-top","0"),r(t,"padding-bottom","0")):"horizontal"===this._slideDirection&&(t=>{r(t,"width",`${t.scrollWidth}px`),o(t),r(t,"width","0"),r(t,"padding-left","0"),r(t,"padding-right","0")})(this._content),this._element.setAttribute("aria-expanded","false"),this._controlText&&(this._controlText.innerText="ナビゲーションを開く"))}setStickyPosition(){this._stickyContent&&!this._isTransition&&_.matches&&r(this._stickyContent,{top:`${window.scrollY}px`,transform:"none"})}removeStickyPosition(){this._stickyContent&&a(this._stickyContent,["top","transform"])}}f.componentName="slideNav",i.set(new class{constructor(){this.componentName=f.componentName,this.commands=["open"],this.isSuccess=!1}getActionMessage(){return this.isSuccess?"Open the navigation":""}getReplyMessage(){return this.isSuccess?"ナビゲーションを開きました。":"既にナビゲーションが開いています。"}action(t){this.isSuccess=!t.isOpen,this.isSuccess&&t.show()}}),i.set(new class{constructor(){this.componentName=f.componentName,this.commands=["close"],this.isSuccess=!1}getActionMessage(){return this.isSuccess?"Close the navigation":""}getReplyMessage(){return this.isSuccess?"ナビゲーションを閉じました。":"既にナビゲーションが閉じています。"}action(t){this.isSuccess=t.isOpen,this.isSuccess&&t.hide()}});var w=f;class v extends n{constructor(){super(),this._target=null,this._startPosition=0,this._endPosition=0,this._distance=0,this._startTimestamp=0,this._timeLapse=0,this._animationInterval=0,this._speed=0}_adjustFocus(){this._target&&(this._target.focus(),document.activeElement!==this._target&&(this._target.tabIndex=-1,this._target.focus(),this._target.removeAttribute("tabindex")))}_stopAnimateScroll(t){const e=document.documentElement.scrollHeight,s=window.scrollY;(t===this._endPosition||s===this._endPosition||(this._startPosition<this._endPosition&&window.innerHeight+s)>=e)&&(window.cancelAnimationFrame(this._animationInterval),this._adjustFocus(),this._startTimestamp=0,this._animationInterval=0)}_loopAnimateScroll(t){this._startTimestamp||(this._startTimestamp=t),this._timeLapse+=t-this._startTimestamp;const e=Math.min(1,this._timeLapse/this._speed),s=this._startPosition+this._distance*(t=>t<.5?2*t**2:(4-2*t)*t-1)(e);window.scrollTo(0,Math.floor(s)),this._stopAnimateScroll(s),this._startTimestamp&&(this._startTimestamp=t,this._animationInterval=requestAnimationFrame(this._loopAnimateScroll.bind(this)))}scroll(t,e=300){if(!this._animationInterval){if("number"==typeof t)this._target=null,this._endPosition=t;else{const e=document.querySelector(".l-header")?.clientHeight||0;this._target=t,this._endPosition=t.getBoundingClientRect().top+window.scrollY-e}this._startPosition=window.scrollY,this._distance=this._endPosition-this._startPosition,this._timeLapse=0,this._speed=e,window.matchMedia("(prefers-reduced-motion)").matches?window.scrollTo(0,Math.floor(this._endPosition)):requestAnimationFrame(this._loopAnimateScroll.bind(this))}}}v.componentName="scroller";const S=new v;i.set(new class{constructor(){this.componentName=v.componentName,this.commands=["top"],this.isSuccess=!1}getActionMessage(){return this.isSuccess?"Scroll to top":""}getReplyMessage(){return this.isSuccess?"ページ最上部までスクロールしました。":"既にページ最上部までスクロールしています。"}action(){this.isSuccess=window.scrollY>0,this.isSuccess&&S.scroll(0)}}),i.set(new class{constructor(){this.componentName=v.componentName,this.commands=["up"],this.isSuccess=!1}getActionMessage(){return this.isSuccess?"Scroll up":""}getReplyMessage(){return this.isSuccess?"上にスクロールしました。":"これ以上は上にスクロールできません。"}action(){if(this.isSuccess=window.scrollY>0,this.isSuccess){const t=Math.max(window.scrollY-300,0);S.scroll(t)}}}),i.set(new class{constructor(){this.componentName=v.componentName,this.commands=["down"],this.isSuccess=!1}getActionMessage(){return this.isSuccess?"Scroll down":""}getReplyMessage(){return this.isSuccess?"下にスクロールしました。":"これ以上は下にスクロールできません。"}action(){if(this.isSuccess=window.innerHeight+window.scrollY<document.documentElement.scrollHeight,this.isSuccess){const t=Math.max(window.scrollY+300,0);S.scroll(t)}}});const y={speed:300};class E extends n{constructor(t,e){super(),this._element=t,this._config=this._getConfig(e),this._hash="",this._checkPageAnchor()&&this._bindEvent()}static create(t,e={}){document.querySelectorAll(t).forEach((t=>{new E(t,e).setStore(t)}))}_getConfig(t){return{...y,...t}}_checkPageAnchor(){if("A"!==this._element.tagName)return!1;const t=this._element;return t.hostname===window.location.hostname&&t.pathname===window.location.pathname&&(this._hash=t.hash,!!this._hash)}_getTarget(){const t=this._element.hash;return"#top"===t?document.documentElement:document.getElementById(t.slice(1))}_setHistory(t){history.pushState(null,document.title,t)}_clickHandler(t){0!==t.button||t.metaKey||t.ctrlKey||t.shiftKey||this.scroll(t)}_bindEvent(){this._element.addEventListener("click",this._clickHandler.bind(this))}scroll(t){const e=this._getTarget();e&&(t?.preventDefault(),this._setHistory(this._hash),S.scroll(e,this._config.speed))}}E.componentName="scrollLink";var b=E;const C=new Map,N=(()=>{let t=0;return e=>{0===t&&(t=window.setTimeout((()=>{e(),t=0}),80))}})(),x=(()=>{let t=0;return e=>{clearTimeout(t),t=window.setTimeout((()=>{e()}),80)}})(),L={on(t,e){const s=C.get(t);s?s.push(e):C.set(t,[e])},emit(t,e){C.get(t)?.forEach((t=>{t(e)}))}};window.addEventListener("scroll",(t=>{N((()=>{L.emit("onScroll",t)}))}),{passive:!0}),window.addEventListener("resize",(()=>{x((()=>{L.emit("onResize")}))}),{passive:!0});var T=L;const A="is-effect-actvie",H={hookPositionId:"top"};class k extends n{constructor(t,e){super(),this._element=t,this._config=this._getConfig(e),this._bindEvent()}static create(t,e={}){document.querySelectorAll(t).forEach((t=>{new k(t,e).setStore(t)}))}_getConfig(t){return{...H,...t}}_scrollHandler(){0===window.scrollY?this.removeEffect():this.setEffect()}_intersectionListener(){const t=document.getElementById(this._config.hookPositionId);t&&new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.removeEffect():this.setEffect()}))}),{threshold:0}).observe(t)}_bindEvent(){"top"===this._config.hookPositionId?T.on("onScroll",this._scrollHandler.bind(this)):this._intersectionListener()}setEffect(){this._element.classList.add(A)}removeEffect(){this._element.classList.remove(A)}}k.componentName="scrollEffect";var P=k;m.connect("wss://dummy/"),w.create(".js-slide-nav"),b.create(".js-scroll"),h.create(".js-alert-toast"),P.create(".js-navtop")}();